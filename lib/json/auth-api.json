{"openapi":"3.1.0","info":{"title":"CareNest Auth Service API","description":"API documentation for CareNest Auth Service - Auth management","contact":{"name":"CareNest Team","url":"https://carenest.com","email":"support@carenest.com"},"license":{"name":"MIT License","url":"https://opensource.org/licenses/MIT"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8080","description":"Local Development Server"},{"url":"http://localhost:8082","description":"Local Development Server"},{"url":"http://103.252.95.124:8080","description":"Production Server"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"User Account Management","description":"APIs for user account actions"},{"name":"Admin Account Management","description":"Admin APIs for managing user accounts"},{"name":"Shop Account Management","description":"APIs for shop registration and management"}],"paths":{"/api/role-permissions/{id}":{"put":{"tags":["role-permission-controller"],"operationId":"updateRolePermission","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateRolePermissionRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RolePermission"}}}}}},"delete":{"tags":["role-permission-controller"],"operationId":"deleteRolePermission","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/api/admin/accounts/{id}/role":{"put":{"tags":["Admin Account Management"],"operationId":"assignRole","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"role","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"boolean"}}}}}}},"/api/accounts/password":{"put":{"tags":["User Account Management"],"operationId":"updatePassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewPasswordRequest"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/email/verify-otp":{"post":{"tags":["email-controller"],"operationId":"verify","parameters":[{"name":"X-Key-APT","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyOtpRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/shops/register":{"post":{"tags":["Shop Account Management"],"operationId":"createShopAccount","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"201":{"description":"Created"}}}},"/api/shops/information":{"post":{"tags":["Shop Account Management"],"operationId":"shopRegister","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShopRegistrationRequest"}}},"required":true},"responses":{"201":{"description":"Created","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ShopResponse"}}}}}}},"/api/roles":{"get":{"tags":["user-role-controller"],"operationId":"getAllRoles","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserRole"}}}}}}},"post":{"tags":["user-role-controller"],"operationId":"createRole","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRoleRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserRole"}}}}}}},"/api/role-permissions/batch-update":{"post":{"tags":["role-permission-controller"],"operationId":"batchUpdatePermissions","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchUpdatePermissionsRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/permission/check":{"post":{"tags":["permission-controller"],"operationId":"checkUrl","parameters":[{"name":"path","in":"query","required":true,"schema":{"type":"string"}},{"name":"httpMethod","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PermissionCheckResponse"}}}}}}},"/api/modules":{"get":{"tags":["module-controller"],"operationId":"getAllModules","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ModuleFunc"}}}}}}},"post":{"tags":["module-controller"],"operationId":"createModule","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateModuleRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ModuleFunc"}}}}}}},"/api/auth/verify/otp":{"post":{"tags":["auth-controller"],"summary":"Verify OTP for password reset","operationId":"verifyOtpForPasswordReset","parameters":[{"name":"X-Key-APT","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyOtpRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/auth/revoke":{"post":{"tags":["auth-controller"],"operationId":"revoke","requestBody":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"boolean"}}}}}}}},"/api/auth/registerVerifyToken":{"post":{"tags":["auth-controller"],"summary":"Verify email after registration","operationId":"registerVerifyToken","parameters":[{"name":"X-Key-APT","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyOtpRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/auth/refresh":{"post":{"tags":["auth-controller"],"operationId":"refresh","requestBody":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}}}}},"/api/auth/re-send-otp-code":{"post":{"tags":["auth-controller"],"operationId":"reSendOtpCode","requestBody":{"content":{"application/json":{"schema":{"type":"string"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/auth/newPassword":{"post":{"tags":["auth-controller"],"summary":"Reset password with new password","operationId":"resetPassword","parameters":[{"name":"X-Password-Reset-Token","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewPasswordRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/auth/logout":{"post":{"tags":["auth-controller"],"summary":"User logout","operationId":"logout","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/auth/login":{"post":{"tags":["auth-controller"],"operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}}}}},"/api/auth/forgot-password":{"post":{"tags":["auth-controller"],"summary":"Request password reset","operationId":"forgotPassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForgotPasswordRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/accounts/register/customer":{"post":{"tags":["User Account Management"],"operationId":"createCustomerAccount","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"201":{"description":"Created"}}}},"/email/send-otp":{"get":{"tags":["email-controller"],"operationId":"sendOtp","parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/email/check-otp":{"get":{"tags":["email-controller"],"operationId":"checkOtp","parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"boolean"}}}}}}},"/api/roles/{name}":{"get":{"tags":["user-role-controller"],"operationId":"getRoleByName","parameters":[{"name":"name","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserRole"}}}}}}},"/api/role-permissions/display/{roleName}":{"get":{"tags":["role-permission-controller"],"operationId":"getRolePermissionsDisplay","parameters":[{"name":"roleName","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RolePermissionDisplayDto"}}}}}}}},"/api/modules/{urlPattern}":{"get":{"tags":["module-controller"],"operationId":"getModuleByUrlPattern","parameters":[{"name":"urlPattern","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ModuleFunc"}}}}}},"delete":{"tags":["module-controller"],"operationId":"deleteModule","parameters":[{"name":"urlPattern","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/api/auth/verify":{"get":{"tags":["auth-controller"],"operationId":"verify_1","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"boolean"}}}}}}}},"/api/auth/authorize":{"get":{"tags":["auth-controller"],"operationId":"authorize","parameters":[{"name":"Authorization","in":"header","required":true,"schema":{"type":"string"}},{"name":"role","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"boolean"}}}}}}}},"/api/admin/accounts":{"get":{"tags":["Admin Account Management"],"operationId":"getAllAccounts","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AccountResponse"}}}}}}}},"/api/admin/accounts/{id}":{"get":{"tags":["Admin Account Management"],"operationId":"getAccountById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AccountResponse"}}}}}},"delete":{"tags":["Admin Account Management"],"operationId":"deleteAccount","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"boolean"}}}}}}},"/api/accounts/username/{username}":{"get":{"tags":["User Account Management"],"operationId":"findByUsername","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AccountResponse"}}}}}}},"/api/roles/{id}":{"delete":{"tags":["user-role-controller"],"operationId":"deleteRole","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"OK"}}}}},"components":{"schemas":{"UpdateRolePermissionRequest":{"type":"object","properties":{"httpPermission":{"type":"string","enum":["READ","CREATE","UPDATE","DELETE"]}}},"ModuleFunc":{"type":"object","properties":{"urlPattern":{"type":"string"},"name":{"type":"string"}}},"RolePermission":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"role":{"$ref":"#/components/schemas/UserRole"},"module":{"$ref":"#/components/schemas/ModuleFunc"},"httpPermission":{"type":"string","enum":["READ","CREATE","UPDATE","DELETE"]}}},"UserRole":{"type":"object","properties":{"id":{"type":"integer","format":"int32"},"name":{"type":"string"}}},"NewPasswordRequest":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"},"reEnterPassword":{"type":"string"}},"required":["email"]},"VerifyOtpRequest":{"type":"object","properties":{"email":{"type":"string","minLength":1},"otp":{"type":"string","pattern":"\\d{6}"}},"required":["email"]},"RegisterRequest":{"type":"object","properties":{"username":{"type":"string","minLength":1},"fullName":{"type":"string","minLength":1},"birthday":{"type":"string","pattern":"\\d{4}-\\d{2}-\\d{2}"},"gender":{"type":"string","enum":["MALE","FEMALE","OTHER"]},"email":{"type":"string"},"password":{"type":"string","minLength":1},"reEnterPassword":{"type":"string","minLength":1}},"required":["fullName","password","reEnterPassword","username"]},"ShopRegistrationRequest":{"type":"object","properties":{"shopName":{"type":"string","maxLength":50,"minLength":1},"description":{"type":"string"},"shopPassword":{"type":"string","minLength":1},"imgUrl":{"type":"string"},"workingDays":{"type":"string"},"shopId":{"type":"string"}},"required":["shopName","shopPassword"]},"ShopResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"shopName":{"type":"string"},"owner":{"type":"string"},"description":{"type":"string"},"status":{"type":"boolean"},"workingDay":{"type":"string"},"workingDays":{"type":"string"},"imgUrl":{"type":"string"}}},"CreateRoleRequest":{"type":"object","properties":{"name":{"type":"string"}}},"BatchUpdatePermissionsRequest":{"type":"object","properties":{"roleName":{"type":"string"},"moduleUrlPattern":{"type":"string"},"httpPermissions":{"type":"array","items":{"type":"string","enum":["READ","CREATE","UPDATE","DELETE"]}}}},"PermissionCheckResponse":{"type":"object","properties":{"allowed":{"type":"boolean"}}},"CreateModuleRequest":{"type":"object","properties":{"urlPattern":{"type":"string"},"name":{"type":"string"}}},"TokenResponse":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"}}},"LoginRequest":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}}},"LoginResponse":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"username":{"type":"string"}}},"ForgotPasswordRequest":{"type":"object","properties":{"email":{"type":"string"}}},"RolePermissionDisplayDto":{"type":"object","properties":{"moduleUrlPattern":{"type":"string"},"moduleName":{"type":"string"},"currentPermissions":{"type":"array","items":{"type":"string","enum":["READ","CREATE","UPDATE","DELETE"]}},"availablePermissions":{"type":"array","items":{"type":"string","enum":["READ","CREATE","UPDATE","DELETE"]}}}},"AccountResponse":{"type":"object","properties":{"id":{"type":"string"},"username":{"type":"string"},"email":{"type":"string"},"role":{"type":"string"},"isActive":{"type":"boolean"}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}